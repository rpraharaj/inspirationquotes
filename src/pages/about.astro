---
import BaseLayout from '../layouts/BaseLayout.astro';
import AuthorBio from '../components/ui/AuthorBio.astro';
import Icon from '../components/ui/Icon.astro';
import { siteConfig } from '../config/site';
import { categories } from '../config/categories';
import { getCollection } from 'astro:content';
import { 
  generateAboutPageSchema, 
  getDefaultAuthorSchema,
  generateBreadcrumbSchema,
  type Schema 
} from '../lib/schema';

// Get all posts for dynamic stats
const allPosts = await getCollection('blog');
const totalArticles = allPosts.length;

// Featured categories for the "What We Cover" section
const featuredCategorySlugs = [
  'motivation-success',
  'love-relationships',
  'life-wisdom',
  'happiness-joy',
  'friendship',
  'courage-confidence',
];

const featuredCategories = featuredCategorySlugs
  .map(slug => categories.find(cat => cat.slug === slug))
  .filter(Boolean);

// Generate JSON-LD structured data for About page
const aboutDescription = "Learn about Inspiration Quotes Hub — a curated home for motivation, wisdom, and daily encouragement.";
const schemas: Schema[] = [
  generateAboutPageSchema(aboutDescription),
  getDefaultAuthorSchema(),
  generateBreadcrumbSchema(
    [{ name: 'Home', url: '/' }, { name: 'About' }],
    '/about'
  ),
];
---

<BaseLayout 
  title={`About | ${siteConfig.name}`} 
  description={aboutDescription}
  schemas={schemas}
>
  <div class="py-16 sm:py-24">
    <div class="mx-auto max-w-wide px-4 sm:px-6">
      <!-- Header -->
      <header class="mb-16 animate-fade-in">
        <span class="inline-flex items-center gap-2 text-sm font-medium tracking-widest uppercase text-foreground-tertiary mb-4">
          <Icon name="book-open" size={18} />
          About
        </span>
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight mb-6">
          About Inspiration Quotes Hub
        </h1>
        <p class="text-lg sm:text-xl text-foreground-secondary max-w-2xl">
          A calm, thoughtful corner of the internet for quotes that uplift, ground, 
          and spark fresh perspective.
        </p>
      </header>
      
      <!-- Main Content -->
      <div class="grid lg:grid-cols-[2fr_1fr] gap-16">
        <!-- Left Column - Content -->
        <div class="space-y-12 animate-slide-up">
          <!-- Mission Section -->
          <section>
            <div class="prose max-w-none">
              <p class="text-lg leading-relaxed">
                Inspiration Quotes Hub was created to make meaningful words easy to find, 
                remember, and share. Whether you need a quick spark or a deeper reflection, 
                we help you get there.
              </p>
              
              <p>
                We curate quotes across themes like motivation, love, courage, and creativity. 
                Each collection is designed to help you match the moment—start your morning, 
                reset your mindset, or send a thoughtful message to someone you care about.
              </p>
              
              <p>
                We focus on clarity and attribution. When a quote has a known source, we aim to 
                share it. When the origin is unclear, we label it honestly so you can trust what 
                you're reading.
              </p>
            </div>
          </section>
          
          <!-- What We Cover Section - Now with featured categories only -->
          <section>
            <div class="flex items-center justify-between mb-6">
              <h2 class="text-2xl font-bold tracking-tight">What You'll Find</h2>
              <a 
                href="/categories" 
                class="text-sm font-medium text-foreground-secondary hover:text-foreground transition-colors inline-flex items-center gap-1"
              >
                View all {categories.length} categories
                <Icon name="chevron-right" size={16} />
              </a>
            </div>
            <div class="grid sm:grid-cols-2 gap-4">
              {featuredCategories.map((category) => category && (
                <a 
                  href={`/categories/${category.slug}`}
                  class="group p-5 border border-border rounded-xl bg-background hover:border-border-strong hover:bg-background-secondary transition-all"
                >
                  <div class="flex items-start gap-4">
                    <div class="w-10 h-10 flex items-center justify-center rounded-lg bg-background-secondary border border-border text-foreground-secondary group-hover:text-foreground transition-colors flex-shrink-0">
                      <Icon name={category.icon} size={20} strokeWidth={1.5} />
                    </div>
                    <div class="flex-1 min-w-0">
                      <h3 class="font-bold mb-1 group-hover:text-foreground-secondary transition-colors">
                        {category.name}
                      </h3>
                      <p class="text-sm text-foreground-tertiary line-clamp-2">
                        {category.description}
                      </p>
                    </div>
                  </div>
                </a>
              ))}
            </div>
          </section>
          
          <!-- Why Trust Us Section -->
          <section>
            <h2 class="text-2xl font-bold tracking-tight mb-6">Why Inspiration Quotes Hub?</h2>
            <div class="grid sm:grid-cols-2 gap-4">
              <div class="p-5 border border-border rounded-xl bg-background">
                <div class="w-10 h-10 flex items-center justify-center rounded-lg bg-background-secondary mb-4 border border-border">
                  <Icon name="book-open" size={20} />
                </div>
                <h3 class="font-bold mb-2">Curated Collections</h3>
                <p class="text-sm text-foreground-secondary">
                  Themes are thoughtfully grouped so you can find the right words quickly.
                </p>
              </div>
              
              <div class="p-5 border border-border rounded-xl bg-background">
                <div class="w-10 h-10 flex items-center justify-center rounded-lg bg-background-secondary mb-4 border border-border">
                  <Icon name="check" size={20} />
                </div>
                <h3 class="font-bold mb-2">Attribution First</h3>
                <p class="text-sm text-foreground-secondary">
                  We aim to provide accurate sources and clear credit whenever possible.
                </p>
              </div>
              
              <div class="p-5 border border-border rounded-xl bg-background">
                <div class="w-10 h-10 flex items-center justify-center rounded-lg bg-background-secondary mb-4 border border-border">
                  <Icon name="share" size={20} />
                </div>
                <h3 class="font-bold mb-2">Shareable Moments</h3>
                <p class="text-sm text-foreground-secondary">
                  Short, memorable quotes ready for cards, captions, and messages.
                </p>
              </div>
              
              <div class="p-5 border border-border rounded-xl bg-background">
                <div class="w-10 h-10 flex items-center justify-center rounded-lg bg-background-secondary mb-4 border border-border">
                  <Icon name="moon" size={20} />
                </div>
                <h3 class="font-bold mb-2">Calm by Design</h3>
                <p class="text-sm text-foreground-secondary">
                  A clean, distraction-free reading experience that keeps focus on the words.
                </p>
              </div>
            </div>
          </section>
          
          <!-- Get in Touch Section -->
          <section>
            <h2 class="text-2xl font-bold tracking-tight mb-6">Get in Touch</h2>
            <div class="prose max-w-none">
              <p>
                Have a favorite quote to share, a correction to suggest, or a theme you'd 
                love to see? We'd love to hear from you.
              </p>
            </div>
            
            <div class="flex flex-wrap gap-4 mt-6">
              <a 
                href={siteConfig.social.twitter}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-2 px-4 py-2.5 border border-border rounded-xl text-sm font-medium hover:bg-background-secondary transition-colors"
              >
                <Icon name="twitter" size={18} />
                X / Twitter
              </a>
              
              <a 
                href={siteConfig.social.github}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-2 px-4 py-2.5 border border-border rounded-xl text-sm font-medium hover:bg-background-secondary transition-colors"
              >
                <Icon name="github" size={18} />
                GitHub
              </a>
              
              <a 
                href={`mailto:${siteConfig.social.email}`}
                class="inline-flex items-center gap-2 px-4 py-2.5 border border-border rounded-xl text-sm font-medium hover:bg-background-secondary transition-colors"
              >
                <Icon name="mail" size={18} />
                Email
              </a>
            </div>
          </section>
        </div>
        
        <!-- Right Column - Author Card -->
        <aside class="space-y-6 animate-slide-up stagger-2">
          <h2 class="text-lg font-bold tracking-tight">Curated By</h2>
          <AuthorBio showAchievements={true} />
          
          <!-- Quick Stats -->
          <div class="p-6 border border-border rounded-xl bg-background-secondary mt-8">
            <h3 class="text-sm font-bold uppercase tracking-wider text-foreground-tertiary mb-4">
              Site Stats
            </h3>
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <span class="text-foreground-secondary flex items-center gap-2">
                  <Icon name="message-square" size={16} />
                  Quotes
                </span>
                <span class="font-bold">{totalArticles}+</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-foreground-secondary flex items-center gap-2">
                  <Icon name="layers" size={16} />
                  Themes
                </span>
                <span class="font-bold">{categories.length}</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-foreground-secondary flex items-center gap-2">
                  <Icon name="sun" size={16} />
                  Refresh
                </span>
                <span class="font-bold">Daily</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-foreground-secondary flex items-center gap-2">
                  <Icon name="sparkles" size={16} />
                  Focus
                </span>
                <span class="font-bold">Inspiration</span>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
