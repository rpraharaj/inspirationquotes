---
import BaseLayout from '../layouts/BaseLayout.astro';
import Icon from '../components/ui/Icon.astro';
import { siteConfig } from '../config/site';
import { 
  generateWebPageSchema, 
  generateBreadcrumbSchema,
  type Schema 
} from '../lib/schema';

const lastUpdated = '2026-02-05';

// Generate JSON-LD structured data for Privacy Policy page
const privacyDescription = `Privacy Policy for ${siteConfig.name}. Learn how we collect, use, and protect your data when you visit our website.`;
const schemas: Schema[] = [
  generateWebPageSchema({
    title: `Privacy Policy | ${siteConfig.name}`,
    description: privacyDescription,
    url: '/privacy',
    type: 'WebPage',
  }),
  generateBreadcrumbSchema(
    [{ name: 'Home', url: '/' }, { name: 'Privacy Policy' }],
    '/privacy'
  ),
];

// Table of contents sections
const tocSections = [
  { id: 'information-collected', title: 'Information We Collect' },
  { id: 'how-we-use', title: 'How We Use Your Information' },
  { id: 'cookies', title: 'Cookies and Tracking' },
  { id: 'third-party', title: 'Third-Party Services' },
  { id: 'security', title: 'Data Security' },
  { id: 'retention', title: 'Data Retention' },
  { id: 'your-rights', title: 'Your Privacy Rights' },
  { id: 'children', title: 'Children\'s Privacy' },
  { id: 'changes', title: 'Changes to This Policy' },
  { id: 'contact', title: 'Contact Us' },
];
---

<BaseLayout 
  title={`Privacy Policy | ${siteConfig.name}`} 
  description={privacyDescription}
  schemas={schemas}
>
  <div class="py-16 sm:py-24">
    <div class="mx-auto max-w-6xl px-4 sm:px-6">
      
      <!-- Layout: Content + Sidebar -->
      <div class="lg:grid lg:grid-cols-[1fr_280px] lg:gap-16">
        
        <!-- Main Content Column -->
        <div class="min-w-0">
          <!-- Header -->
          <header class="mb-10 pb-10 border-b border-border animate-fade-in">
            <!-- Breadcrumb -->
            <nav class="flex items-center gap-2 text-sm text-foreground-tertiary mb-6" aria-label="Breadcrumb">
              <a href="/" class="hover:text-foreground transition-colors">Home</a>
              <Icon name="chevron-right" size={14} />
              <span class="text-foreground">Privacy Policy</span>
            </nav>
            
            <!-- Meta -->
            <div class="flex flex-wrap items-center gap-3 mb-6">
              <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-background-secondary border border-border text-sm font-medium">
                <Icon name="book-open" size={14} />
                Policy
              </span>
              <span class="text-foreground-tertiary">Â·</span>
              <span class="text-sm text-foreground-tertiary inline-flex items-center gap-1">
                <Icon name="calendar" size={14} />
                Updated: <time datetime={lastUpdated}>{new Date(lastUpdated).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</time>
              </span>
            </div>
            
            <!-- Title -->
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight leading-tight mb-6">
              Privacy Policy
            </h1>
            
            <!-- Description -->
            <p class="text-lg sm:text-xl text-foreground-secondary leading-relaxed">
              Your privacy matters to us. This policy explains how {siteConfig.name} collects, 
              uses, and protects your information when you visit our website.
            </p>
          </header>
          
          <!-- Article Content -->
          <article class="prose max-w-none animate-slide-up">
            
            <!-- Introduction -->
            <p>
              At <strong>{siteConfig.name}</strong>, we take your privacy seriously. This Privacy Policy explains how we collect, 
              use, disclose, and safeguard your information when you visit our website at <a href={siteConfig.url}>{siteConfig.url}</a>.
            </p>
            
            <p>
              Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, 
              please do not access the site.
            </p>

            <!-- Information We Collect -->
            <h2 id="information-collected">Information We Collect</h2>
            
            <h3>Information Automatically Collected</h3>
            <p>
              When you visit our website, we may automatically collect certain information about your device, including:
            </p>
            <ul>
              <li><strong>Log Data:</strong> Your IP address, browser type, operating system, referring URLs, pages visited, and timestamps</li>
              <li><strong>Device Information:</strong> Device type, screen resolution, and language preferences</li>
              <li><strong>Usage Data:</strong> How you interact with our website, including time spent on pages and click patterns</li>
            </ul>
            
            <h3>Information You Provide</h3>
            <p>
              If you contact us via email or submit a quote, we may collect:
            </p>
            <ul>
              <li>Your name and email address</li>
              <li>The content of your message, quote submission, or inquiry</li>
              <li>Any other information you choose to provide</li>
            </ul>

            <!-- How We Use Your Information -->
            <h2 id="how-we-use">How We Use Your Information</h2>
            <p>
              We use the information we collect for the following purposes:
            </p>
            <ul>
              <li>To provide, maintain, and improve our website</li>
              <li>To understand how visitors use our site so we can improve user experience</li>
              <li>To respond to your comments, questions, and requests</li>
              <li>To review and curate quote submissions</li>
              <li>To monitor and analyze trends, usage, and activities</li>
              <li>To detect, prevent, and address technical issues</li>
              <li>To comply with legal obligations</li>
            </ul>

            <!-- Cookies and Tracking Technologies -->
            <h2 id="cookies">Cookies and Tracking Technologies</h2>
            <p>
              We use cookies and similar tracking technologies to collect and track information and to improve 
              and analyze our website. Cookies are small data files stored on your device.
            </p>
            
            <h3>Types of Cookies We Use</h3>
            <ul>
              <li><strong>Essential Cookies:</strong> Required for the website to function properly (e.g., remembering your theme preference)</li>
              <li><strong>Analytics Cookies:</strong> Help us understand how visitors interact with our website</li>
            </ul>
            
            <h3>Managing Cookies</h3>
            <p>
              You can control cookies through your browser settings. Most browsers allow you to:
            </p>
            <ul>
              <li>See what cookies are stored and delete them individually</li>
              <li>Block third-party cookies</li>
              <li>Block all cookies</li>
              <li>Clear all cookies when you close the browser</li>
            </ul>
            <p>
              Please note that blocking cookies may affect your experience on our website.
            </p>

            <!-- Third-Party Services -->
            <h2 id="third-party">Third-Party Services</h2>
            <p>
              We may use third-party services that collect, monitor, and analyze data to improve our website. 
              These services have their own privacy policies addressing how they use such information.
            </p>
            
            <h3>Analytics</h3>
            <p>
              We may use analytics services (such as Google Analytics) to help understand use of our website. 
              These services collect information sent by your browser, including your IP address and the pages you visit. 
              This information is used to evaluate visitors' use of the website and compile statistical reports.
            </p>
            <p>
              You can opt out of Google Analytics by installing the 
              <a href="https://tools.google.com/dlpage/gaoptout" target="_blank" rel="noopener noreferrer">
                Google Analytics Opt-out Browser Add-on
              </a>.
            </p>
            
            <h3>Content Delivery and Hosting</h3>
            <p>
              Our website is hosted on Cloudflare. Cloudflare may collect certain information about visitors 
              to provide security and performance services. You can review 
              <a href="https://www.cloudflare.com/privacypolicy/" target="_blank" rel="noopener noreferrer">
                Cloudflare's Privacy Policy
              </a> 
              for more information.
            </p>
            
            <h3>External Links</h3>
            <p>
              Our website contains links to external websites that are not operated by us. If you click on a 
              third-party link, you will be directed to that third party's site. We have no control over and 
              assume no responsibility for the content, privacy policies, or practices of any third-party sites.
            </p>

            <!-- Data Security -->
            <h2 id="security">Data Security</h2>
            <p>
              We use appropriate technical and organizational security measures designed to protect the security 
              of any personal information we process. However, please note that no method of transmission over 
              the Internet or method of electronic storage is 100% secure. While we strive to protect your 
              personal information, we cannot guarantee its absolute security.
            </p>
            <p>
              Our website uses HTTPS encryption to protect data transmitted between your browser and our servers.
            </p>

            <!-- Data Retention -->
            <h2 id="retention">Data Retention</h2>
            <p>
              We retain your information only for as long as necessary to fulfill the purposes outlined in this 
              privacy policy, unless a longer retention period is required or permitted by law.
            </p>
            <p>
              Analytics data is typically retained for up to 26 months, after which it is automatically deleted 
              or anonymized.
            </p>

            <!-- Your Rights -->
            <h2 id="your-rights">Your Privacy Rights</h2>
            <p>
              Depending on your location, you may have certain rights regarding your personal information:
            </p>
            
            <h3>For All Users</h3>
            <ul>
              <li><strong>Access:</strong> You can request copies of your personal data</li>
              <li><strong>Correction:</strong> You can request that we correct any inaccurate information</li>
              <li><strong>Deletion:</strong> You can request that we delete your personal data in certain circumstances</li>
            </ul>
            
            <h3>For EU/EEA Residents (GDPR)</h3>
            <p>
              If you are a resident of the European Union or European Economic Area, you have additional rights under 
              the General Data Protection Regulation (GDPR), including:
            </p>
            <ul>
              <li>Right to restriction of processing</li>
              <li>Right to data portability</li>
              <li>Right to object to processing</li>
              <li>Right to withdraw consent at any time</li>
              <li>Right to lodge a complaint with a supervisory authority</li>
            </ul>
            
            <h3>For California Residents (CCPA)</h3>
            <p>
              If you are a California resident, you have specific rights under the California Consumer Privacy Act (CCPA), including:
            </p>
            <ul>
              <li>Right to know what personal information is collected</li>
              <li>Right to know whether personal information is sold or disclosed and to whom</li>
              <li>Right to opt out of the sale of personal information</li>
              <li>Right to delete personal information</li>
              <li>Right to non-discrimination for exercising your rights</li>
            </ul>
            <blockquote>
              <p><strong>We do not sell your personal information.</strong></p>
            </blockquote>

            <!-- Children's Privacy -->
            <h2 id="children">Children's Privacy</h2>
            <p>
              Our website is not intended for children under 13 years of age. We do not knowingly collect 
              personal information from children under 13. If you are a parent or guardian and believe your 
              child has provided us with personal information, please contact us and we will delete such 
              information from our systems.
            </p>

            <!-- Changes to This Policy -->
            <h2 id="changes">Changes to This Privacy Policy</h2>
            <p>
              We may update our Privacy Policy from time to time. We will notify you of any changes by posting 
              the new Privacy Policy on this page and updating the "Last updated" date at the top.
            </p>
            <p>
              You are advised to review this Privacy Policy periodically for any changes. Changes to this 
              Privacy Policy are effective when they are posted on this page.
            </p>

            <!-- Contact Information -->
            <h2 id="contact">Contact Us</h2>
            <p>
              If you have any questions about this Privacy Policy or our data practices, please contact us:
            </p>
            <ul>
              <li><strong>Email:</strong> <a href={`mailto:${siteConfig.social.email}`}>{siteConfig.social.email}</a></li>
              <li><strong>Website:</strong> <a href={siteConfig.url}>{siteConfig.url}</a></li>
            </ul>
          </article>
          
          <!-- Post Footer -->
          <footer class="mt-16 pt-10 border-t border-border">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
              <a 
                href="/" 
                class="inline-flex items-center gap-2 text-sm font-medium text-foreground-secondary hover:text-foreground transition-colors"
              >
                <Icon name="arrow-left" size={16} />
                Back to Home
              </a>
              
              <a 
                href="/about" 
                class="inline-flex items-center gap-2 text-sm font-medium text-foreground-secondary hover:text-foreground transition-colors"
              >
                About Us
                <Icon name="arrow-right" size={16} />
              </a>
            </div>
          </footer>
        </div>
        
        <!-- Sidebar - Table of Contents -->
        <aside class="hidden lg:block">
          <div class="sticky top-24">
            <!-- Quick Navigation -->
            <div class="p-6 border border-border rounded-xl bg-background-secondary">
              <h3 class="text-sm font-bold uppercase tracking-wider text-foreground-tertiary mb-4 flex items-center gap-2">
                <Icon name="layers" size={16} />
                Quick Links
              </h3>
              <nav aria-label="Table of contents">
                <ul class="space-y-2 text-sm">
                  {tocSections.map((section) => (
                    <li>
                      <a 
                        href={`#${section.id}`} 
                        class="text-foreground-secondary hover:text-foreground transition-colors block py-1"
                      >
                        {section.title}
                      </a>
                    </li>
                  ))}
                </ul>
              </nav>
            </div>
            
            <!-- Contact Box -->
            <div class="p-6 border border-border rounded-xl bg-background mt-6">
              <h3 class="text-sm font-bold uppercase tracking-wider text-foreground-tertiary mb-4 flex items-center gap-2">
                <Icon name="mail" size={16} />
                Questions?
              </h3>
              <p class="text-sm text-foreground-secondary mb-4">
                Have questions about our privacy practices? We're happy to help.
              </p>
              <a 
                href={`mailto:${siteConfig.social.email}`}
                class="inline-flex items-center gap-2 px-4 py-2 border border-border rounded-lg text-sm font-medium hover:bg-background-secondary transition-colors w-full justify-center"
              >
                <Icon name="mail" size={16} />
                Contact Us
              </a>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </div>
</BaseLayout>
